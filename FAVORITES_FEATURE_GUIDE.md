# 笔记收藏和置顶功能使用指南

## 功能介绍

YesnoteLite 现在支持笔记的收藏（星标）和置顶功能：

1. **📌 置顶笔记** - 将重要笔记固定在文件树顶部，方便快速访问
2. **⭐ 收藏笔记** - 为笔记添加星标，标记为收藏
3. **自动排序** - 置顶的笔记会自动显示在文件夹顶部
4. **持久化存储** - 所有收藏和置顶状态都会保存，重启应用后依然保留

## 如何使用

### 启动应用

```bash
cd /Users/fusong/ClaudeCode/notelite
npm run dev
```

### 置顶笔记

1. 在左侧文件树中，找到你想要置顶的笔记
2. **右键点击**笔记名称
3. 在弹出的下拉菜单中，选择 **"📍 Pin Note"**（置顶笔记）
4. 笔记会立即移动到当前文件夹的顶部，并显示 **📌** 标签

### 取消置顶

1. 右键点击已置顶的笔记（带有 📌 标签）
2. 在下拉菜单中选择 **"📌 Unpin Note"**（取消置顶）
3. 笔记会回到原来的位置

### 添加收藏（星标）

1. 右键点击任意笔记
2. 在下拉菜单中选择 **"☆ Add Star"**（添加星标）
3. 笔记名称旁边会显示 **⭐** 图标

### 取消收藏

1. 右键点击已收藏的笔记（带有 ⭐ 图标）
2. 在下拉菜单中选择 **"⭐ Remove Star"**（取消星标）
3. 星标图标会消失

## 界面说明

### 文件树中的视觉标识

- **📌 标签** - 表示这是一个置顶的笔记
- **⭐ 图标** - 表示这是一个收藏的笔记
- **⚙︎ 图标** - 文件夹的操作菜单（点击展开）

### 右键菜单选项（针对笔记文件）

- 📍 Pin Note / 📌 Unpin Note - 置顶/取消置顶
- ☆ Add Star / ⭐ Remove Star - 添加/取消收藏
- ❌ Remove - 删除笔记

### 右键菜单选项（针对文件夹）

- 📄 File - 在文件夹中创建新笔记
- 📂 Folder - 在文件夹中创建子文件夹
- ❌ Remove - 删除文件夹

## 特性说明

### 自动排序
- 置顶的笔记会自动显示在所在文件夹的顶部
- 如果有多个置顶笔记，它们会按照置顶的顺序排列
- 未置顶的笔记保持原有顺序

### 持久化存储
- 所有的置顶和收藏状态都会自动保存
- 关闭应用后重新打开，所有设置都会保留
- 数据存储在 electron-store 中

### 智能清理
- 删除笔记时，会自动从置顶和收藏列表中移除
- 重命名笔记时，置顶和收藏状态会自动更新到新路径

### 多级文件夹支持
- 可以在任意层级的文件夹中置顶笔记
- 置顶只影响当前文件夹内的排序，不会跨文件夹

## 数据存储位置

收藏和置顶数据存储在 electron-store 中：

- `pinnedNotes`: 置顶笔记的路径列表
- `starredNotes`: 收藏笔记的路径列表

## 故障排除

### 如果右键菜单没有显示新选项

1. 确保应用已经重新编译：
   ```bash
   npm run dev
   ```

2. 检查控制台是否有错误信息

3. 尝试刷新应用（如果是开发模式，保存文件会自动刷新）

### 如果置顶后笔记没有移动到顶部

1. 尝试刷新文件树（切换到其他笔记本再切换回来）
2. 检查控制台是否有错误
3. 确保 `ttsStore.refreshTreeData()` 被正确调用

### 如果重启后设置丢失

1. 检查 electron-store 是否正常工作
2. 查看存储路径是否有写入权限
3. 检查控制台是否有存储相关的错误信息

## 技术实现

### 修改的文件

1. `/src/store/store.ts` - 添加收藏状态管理
2. `/src/libs/fileHandler.ts` - 添加排序逻辑
3. `/src/components/aside/FileTree.vue` - 更新UI界面
4. `/src/components/aside/AConfig.vue` - 更新配置
5. `/src/i18n/en.ts` - 英文翻译
6. `/src/i18n/zh.ts` - 中文翻译

### 核心功能

- `togglePin(path)` - 切换置顶状态
- `toggleStar(path)` - 切换收藏状态
- `isPinned(path)` - 检查是否已置顶
- `isStarred(path)` - 检查是否已收藏
- `sortTreeByPinned(tree, pinnedPaths)` - 对树进行排序
- `refreshTreeData()` - 刷新文件树数据

## 截图说明

### 正常状态的笔记
```
📄 我的笔记
```

### 置顶的笔记
```
📄 我的笔记 📌
```

### 收藏的笔记
```
📄 我的笔记 ⭐
```

### 既置顶又收藏的笔记
```
📄 我的笔记 ⭐ 📌
```

## 下一步计划

可能的功能增强：
- [ ] 添加快捷键支持（如 Ctrl+P 置顶）
- [ ] 添加收藏夹视图，集中显示所有收藏的笔记
- [ ] 支持拖拽调整置顶笔记的顺序
- [ ] 添加批量操作功能
- [ ] 支持文件夹的置顶

---

如有问题或建议，请提交 Issue 或 Pull Request。
